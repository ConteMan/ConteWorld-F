(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0ea7cd59"],{"0b22":function(e,t,n){"use strict";n.r(t);var a=n("1da1"),i=n("5530"),s=(n("96cf"),n("d3b7"),n("caad"),n("b0c0"),n("ac0d")),r=n("2f62"),o=n("9fb0"),d={name:"Share",mixins:[s.d],props:{type:{type:String,default:""},slug:{type:String,default:""}},data:function(){return{loading:!0,file:{},jsonData:{}}},methods:Object(i.a)(Object(i.a)({},Object(r.b)("app",{loadingAction:o.j})),{},{domDeal:function(e){return(new DOMParser).parseFromString(e,"text/html")},readFileAsync:function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){t(a.result)},a.onerror=n,a.readAsText(e)}))},fileChange:function(e){var t=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var a,i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.target.files[0],t.file=a,n.next=4,t.readFileAsync(a);case 4:i=n.sent,s=t.domDeal(i),t.jsonData=t.domToJson(s.body);case 7:case"end":return n.stop()}}),n)})))()},domToJson:function(e){if(!e)return null;var t,n=e.nodeName.toLowerCase();if(t=["dl"].includes(n)?[]:{},["dt"].includes(n)&&"a"===e.childNodes[0].nodeName.toLowerCase()){var a=e.childNodes[0];return t.title=a.innerHTML,t.url=a.getAttribute("href"),t.addDate=this.$dayjs.unix(a.getAttribute("add_date")).format("YYYY-MM-DD HH:mm:ss"),t}for(var i=0;i<e.childNodes.length;i++){var s=e.childNodes[i],r=s.nodeName.toLowerCase();["h1","h2","h3"].includes(r)&&(t.name=s.innerHTML,s.getAttribute("add_date")&&(t.addDate=this.$dayjs.unix(s.getAttribute("add_date")).format("YYYY-MM-DD HH:mm:ss")),s.getAttribute("last_modified")&&(t.lastModified=this.$dayjs.unix(s.getAttribute("last_modified")).format("YYYY-MM-DD HH:mm:ss"))),["dt"].includes(r)&&t.push(this.domToJson(s)),["dl"].includes(r)&&(t.children=this.domToJson(s))}return t}})},c=(n("e3ce"),n("2877")),l=Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"share-container"},[n("div",{staticClass:"back"},[n("a-icon",{attrs:{type:"left"},on:{click:function(t){return e.$router.push({path:"/"+e.type})}}})],1),n("div",{staticClass:"content"},[n("div",{staticClass:"fileInput"},[n("button",{on:{click:function(){return e.$refs.fileInput.click()}}},[e._v("选择书签文件转换为 JSON 格式")]),e.file.name?n("div",{staticClass:"file-name"},[e._v(e._s(e.file.name))]):e._e(),n("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.fileChange}})]),Object.keys(e.jsonData).length>0?n("div",{staticClass:"json"},[n("pre",{staticClass:"json-pre",domProps:{innerHTML:e._s(JSON.stringify(e.jsonData,null,2))}})]):e._e()])])}),[],!1,null,"20791bc6",null);t.default=l.exports},d468:function(e,t,n){},e3ce:function(e,t,n){"use strict";n("d468")}}]);