(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-32da161e"],{"1c67":function(t,e,n){"use strict";n.r(e);var i=n("1da1"),r=(n("99af"),n("96cf"),n("e166")),a=n.n(r),s=n("ac0d"),o=n("d354"),c={baseUrl:n("a417").a.e_isconte+"/api/books",index:function(t){var e=t.type,n=t.offset,i=t.limit;return Object(o.a)({url:this.baseUrl,method:"get",params:{type:e,offset:n,limit:i}})},types:function(){return Object(o.a)({url:this.baseUrl+"/types",method:"get"})}},u={name:"Book",components:{InfiniteLoading:a.a},mixins:[s.d],data:function(){return{items:[],offset:0,type:"",limit:20,total:0,hasMore:!0,types:[],infiniteId:+new Date}},created:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTypes();case 2:case"end":return e.stop()}}),e)})))()},methods:{init:function(){this.items=[],this.offset=0,this.busy=!1,this.total=0,this.hasMore=!0},index:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var n,i,r,a,s,o,u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.offset,i=t.limit,r=t.type,e.next=3,c.index({offset:n,limit:i,type:r});case 3:if(0!==(a=e.sent).data.code){e.next=17;break}if(s=a.data.data,o=s.hasMore,u=s.items,f=s.totalCount,t.total=f,t.hasMore=o,u.length>0&&(t.items=t._.concat(t.items,u)),!o){e.next=14;break}return t.offset+=t.limit,e.abrupt("return",1);case 14:return e.abrupt("return",0);case 15:e.next=18;break;case 17:return e.abrupt("return",-1);case 18:case"end":return e.stop()}}),e)})))()},infiniteHandler:function(t){var e=this;return Object(i.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.types.length){n.next=3;break}return t.loaded(),n.abrupt("return",!1);case 3:if(e.hasMore){n.next=6;break}return t.complete(),n.abrupt("return",!0);case 6:return n.next=8,e.index();case 8:n.sent>0?t.loaded():t.complete();case 10:case"end":return n.stop()}}),n)})))()},getTypes:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.types();case 2:0===(n=e.sent).data.code&&(i=n.data.data.items,t.types=i,t.type=i[0].type,t.$nextTick((function(){t.index()})));case 4:case"end":return e.stop()}}),e)})))()},changeType:function(t){if(this.type===t)return!1;this.type=t,this.init(),this.infiniteId+=1,this.index()}}},f=(n("5f30"),n("2877")),l=Object(f.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-list"},[n("div",{staticClass:"nav-bar"},[n("a-space",t._l(t.types,(function(e){return n("span",{key:e.type,staticClass:"nav-item",class:{active:t.type===e.type},on:{click:function(n){return t.changeType(e.type)}}},[t._v(" "+t._s(e.value)+" "+t._s(e.total)+" ")])})),0)],1),n("div",{staticClass:"item-container"},[t._l(t.items,(function(e){return n("div",{key:e.id,staticClass:"book-item"},[n("div",{staticClass:"pic"},[n("img",{attrs:{referrerpolicy:"no-referrer",src:e.content_origin.pic}})]),n("div",{staticClass:"title"},[n("a",{attrs:{href:e.content_origin.link,target:"_blank"}},[t._v(t._s(e.content))])]),n("div",{staticClass:"intro"},[t._v(" "+t._s(e.content_origin.author+" / "+e.content_origin.publisher+" / "+e.content_origin.publishDate)+" ")]),n("div",{staticClass:"rate"},[e.content_origin.rate?n("a-rate",{attrs:{disabled:""},model:{value:e.content_origin.rate,callback:function(n){t.$set(e.content_origin,"rate",n)},expression:"item.content_origin.rate"}}):t._e()],1),e.content_origin.comment?n("div",{staticClass:"comment"},[t._v(" "+t._s(e.content_origin.comment)+" ")]):t._e(),n("div",{staticClass:"info"},[n("span",{staticClass:"time"},[t._v(" "+t._s(t.$dayjs(e.info_at).format("YYYY-MM-DD"))+" ")])])])})),n("infinite-loading",{attrs:{identifier:t.infiniteId},on:{infinite:t.infiniteHandler}},[n("template",{slot:"no-more"},[t._v("No more.")]),n("template",{slot:"no-results"},[t._v("No more.")])],2)],2)])}),[],!1,null,"72157072",null);e.default=l.exports},"5f30":function(t,e,n){"use strict";n("e1f0")},e1f0:function(t,e,n){}}]);